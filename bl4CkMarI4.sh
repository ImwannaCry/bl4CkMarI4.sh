#!/bin/bash

################################################################################
# Titulo    : BELA DAMA -Parsing HTML-                                         #
# Versao    : 1.1                                                              #
# Data      : 16/10/2023                                                       #
# AUTOR     : FRANCÊS                                                          #
# Tested on : Linux                                                            #
# -----------------------------------------------------------------------------#
# Descrição:                                                                   #
#   Esse programa tem a função de procurar todos os links que podem ser        #
#   considerados uteis para analise, e verificar quais deles estão ativos.     #
#                                                                              #
################################################################################


# Tabela de Cores
GREEN_BLINK='\e[32;5;1m'
YELLOW='\e[33;1m'
RED_BLINK='\e[31;5;1m'
END='\e[m'
if [ "$1" == "" ]
then    
echo -e "

${GREEN_BLINK}
   
        ____    ____    __        __      ____       __      __  __      __      
       (  _ \  ( ___)  (  )      /__\    (  _ \     /__\    (  \/  )    /__\    
        ) _ <   )__)    )(__    /(__)\    )(_) )   /(__)\    )    (    /(__)\   
       (____/  (____)  (____)  (__)(__)  (____/   (__)(__)  (_/\/\_)  (__)(__)  
                                                                                ${END}
${RED_BLINK}               
               

                ⠻⣦⡈⠛⢿⡌⢆⢂⠹⣿⣧⡄⡄⠹⡄⢆⡟⢄⠉⢟⣮⣷⢄⠐⢤⡤⢤⣬⣭⣭
                ⣷⣤⠙⣶⣦⠙⡌⢻⠂⠘⣿⣷⢹⠄⢳⠘⣿⡟⣿⡄⢳⡆⢳⠛⢢⠈⠉⠛⠛⠛
                ⢿⣿⣷⣀⠈⠓⠌⠂⠘⢆⠈⢙⣎⢣⠘⡆⢣⡛⣿⡇⢀⡙⠚⠶⠶⠿⠷⠶⠒⠒
                ⣾⠿⣿⣿⣦⣄⣁⣀⣠⡀⠡⠄⠳⡛⢆⠱⠈⢧⣿⡇⠸⠟⠉⠐⠠⠄⠄⠄⣼⣿
                ⣿⣷⣬⣉⣛⣛⠛⠿⠿⣧⣷⣦⣄⠘⢿⡆⠡⠘⣀⡇⢠⣶⣷⣮⣤⣤⣴⣿⣿⣿
                ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⡀⢿⡀⠄⠉⡇⢸⣿⣿⣿⣉⣉⣉⣉⣉⣰
                ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡏⣿⣦⡙⠄⠄⠁⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿
                ⣿⡙⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⠁⣿⣿⣷⣌⠄⠄⠘⣿⣿⣿⣿⣿⣿⣿⣿⣿
                ⣿⣿⣦⣀⡨⣝⡻⠿⣻⣿⣧⣄⠄⠄⣿⣿⣿⣿⣿⣦⡀⢻⣿⣿⣿⣿⣿⡿⠿⣿
                ⣿⣿⣿⣿⡇⢿⡛⢿⣿⣿⣿⣿⣧⠘⣿⣛⣻⣿⣿⣿⣿⣤⡿⢿⠿⣛⡃⠄⣸⣿
                ⡹⣿⣿⣿⣿⣼⣷⣶⣝⢿⣿⣿⣿⣧⣿⣿⣿⣿⣿⣿⣿⣿⡿⠟⣿⢇⣈⣼⣿⣿
                ⣿⣜⢿⣭⢻⣿⣿⣿⣯⢧⠙⢻⠛⣛⣛⠛⠛⠿⠿⠟⣛⣥⣶⣼⢏⣾⣿⣿⣿⣿
                ⣿⣿⣎⠿⣇⢻⣿⣿⣿⡌⢷⣆⢭⣓⣒⣒⣛⣣⣶⠞⣵⣿⣿⣿⡿⣱⣾⡟⣵⣿
                ⣿⣿⣿⣤⣻⡘⣿⣿⣿⣷⡜⢻⣮⣛⣛⣟⣫⡿⣛⣴⣿⣿⣿⣿⢃⣿⣿⣷⣿⣿
                ⣿⣿⣿⣿⣷⣣⢹⣿⣿⣿⣿⣯⡙⠛⠛⠛⢛⣺⣿⣿⣿⣿⣿⠇⣼⢫⣵⣿⣿
${END}

        Usage   : ${RED}${0}${END} [OPTION] [URL]
        Example : ${RED}${0}${END} www.site.com
"
else
echo -e "
${RED_BLINK}
========================================================================================${END}

                ${GREEN} [+] Resolvendo URLs em:${END} $1

${RED_BLINK}
========================================================================================${END}
"
wget $1 2> /dev/null
echo -e "
${YELLOW}
========================================================================================${END}
        ADDRESS                         IP                                                                      "


grep href index.html | cut -d "/" -f 3 | grep "\." | cut -d '"' -f 1 | grep -v "<l"  > lista
for url in $(cat lista); do
    ip=$(host $url | grep "has addr" | awk -F "has" '{print $2}' | sed 's/address/ /g')
    echo -e "\e[32m$url\e[0m\t\t\e[31m$ip\e[0m"
done | column -t
echo -e  " ${YELLOW}
========================================================================================${END}
"
fi
rm  $(pwd)/index* 2>/dev/null

rm $(pwd)/lista 2>/dev/null
